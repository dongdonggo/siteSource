<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Laravel控制器-Laravel教程-吕滔博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="https://www.lvtao.net/usr/themes/default/assets/favicon.ico"/>
    <link href="/study_doc/style.css" rel="stylesheet" />
</head>
<body>
<div id="header">
    <div class="outer">
        <h1 class="logo">Laravel</h1>
    </div>
</div>
<div id="article">
    <div class="outer">
        <div class="sidebar">
            <a href="index.html"><i class="icon">&#xe6a7;</i>Laravel教程</a><a href="laravel_installation.html"><i class="icon">&#xe6a7;</i>Laravel环境安装配置</a><a href="laravel_application_structure.html"><i class="icon">&#xe6a7;</i>Laravel应用程序结构</a><a href="laravel_configuration.html"><i class="icon">&#xe6a7;</i>Laravel配置</a><a href="laravel_routing.html"><i class="icon">&#xe6a7;</i>Laravel路由</a><a href="laravel_middleware.html"><i class="icon">&#xe6a7;</i>Laravel中间件</a><a href="laravel_controllers.html"><i class="icon">&#xe6a7;</i>Laravel控制器</a><a href="laravel_request.html"><i class="icon">&#xe6a7;</i>Laravel请求</a><a href="laravel_cookie.html"><i class="icon">&#xe6a7;</i>Laravel Cookie</a><a href="laravel_response.html"><i class="icon">&#xe6a7;</i>Laravel响应</a><a href="laravel_views.html"><i class="icon">&#xe6a7;</i>Laravel视图</a><a href="laravel_redirections.html"><i class="icon">&#xe6a7;</i>Laravel重定向</a><a href="laravel_working_with_database.html"><i class="icon">&#xe6a7;</i>Laravel操作数据库</a><a href="insert_records.html"><i class="icon">&#xe6a7;</i>Laravel插入数据库表数据</a><a href="retrieve_records.html"><i class="icon">&#xe6a7;</i>Laravel检索查询数据</a><a href="update_records.html"><i class="icon">&#xe6a7;</i>Laravel更新数据</a><a href="delete_records.html"><i class="icon">&#xe6a7;</i>Laravel删除数据</a><a href="laravel_errors_and_logging.html"><i class="icon">&#xe6a7;</i>Laravel错误和日志记录</a><a href="laravel_forms.html"><i class="icon">&#xe6a7;</i>Laravel表单处理</a><a href="laravel_localization.html"><i class="icon">&#xe6a7;</i>Laravel本地化</a><a href="laravel_session.html"><i class="icon">&#xe6a7;</i>Laravel会话(session)</a><a href="laravel_validation.html"><i class="icon">&#xe6a7;</i>Laravel验证</a><a href="laravel_file_uploading.html"><i class="icon">&#xe6a7;</i>Laravel文件上传</a><a href="laravel_sending_email.html"><i class="icon">&#xe6a7;</i>Laravel发送邮件</a><a href="laravel_ajax.html"><i class="icon">&#xe6a7;</i>Laravel Ajax</a><a href="laravel_error_handling.html"><i class="icon">&#xe6a7;</i>Laravel错误处理</a><a href="laravel_event_handling.html"><i class="icon">&#xe6a7;</i>Laravel事件处理</a><a href="laravel_facades.html"><i class="icon">&#xe6a7;</i>Laravel Facades</a><a href="laravel_security.html"><i class="icon">&#xe6a7;</i>Laravel安全</a>
        </div>
        <div class="article_area">
            <h2 class="title">Laravel控制器</h2>
            <div class="article-content">  <div> <div> 在MVC框架中，字母“C”代表控制器。它充当视图和模型之间的指挥中心(或桥梁)。 </div></div><div> <h3> <div> 创建一个控制器 </div> </h3> <div> 打开您正在使用的操作系统上的命令提示符或终端，然后键入以下命令使用&nbsp;Artisan&nbsp;CLI&nbsp;(命令行接口)来创建控制器。 </div><pre>php artisan make:controller &lt;controller-name&gt; --plain&nbsp;</pre> <p style="text-align:justify;"> 替换&nbsp;&lt;controller-name&gt;&nbsp;为您的控制器的名称。我们将创建一个简单的构造器使用传递一个参数—&nbsp;plain。&nbsp;如果不希望创建一个普通的构造函数，可以忽略参数。&nbsp;创建的构造函数在&nbsp;app/Http/Controllers.&nbsp;你会看到一些基本的编码已经自动生成了，你可以自定义添加编码。创建控制器可以通过routes.php文件中使用以下语法调用。 </p> <h3> 语法 </h3><pre>Route::get(‘base URI’,’controller@method’);</pre> <h3> 示例 </h3> <div> 第1步-&nbsp;执行以下命令来创建用户控制器&nbsp;-&nbsp;UserController。 </div><pre>php artisan make:controller UserController</pre> <div> 第2步&nbsp;-&nbsp;成功执行后，您会收到以下输出。<br /><img src="https://www.lvtao.net/study_doc/uploadfile/2017/0421/20170421023520412.png" alt="" /><br /> </div> <p> 第3步&nbsp;-&nbsp;你可以在&nbsp;<strong>app/Http/Controller/UserController.php</strong>&nbsp;看到创建控制器已经自动生成一些基本的代码，您可以根据需要添加自己的编码。&nbsp; </p><pre>&lt;?phpnamespace AppHttpControllers;use IlluminateHttpRequest;use AppHttpRequests;use AppHttpControllersController;class UserController extends Controller { //}</pre> <h2> <div> 控制器中间件 </div> </h2> <p> 我们已经在前面学习了中间件，它可以与控制器一起使用。中间件也可以被分配到控制器的路由或控制器的构造函数中。可以使用中间件方法来分配中间件到控制器。&nbsp;已注册中间件也可以限制到控制器的某些方法。 </p> <h3> <div> 分配中间件路由 </div> </h3><pre>Route::get('profile', [ 'middleware' =&gt; 'auth', 'uses' =&gt; 'UserController@showProfile']);</pre> <div> 在这里，我们在路由配置文件分配身份验证中间件使用到&nbsp;UserController。 </div> <h3> <div> 控制器的构造函数中分配中间件 </div> </h3><pre>&lt;?phpnamespace AppHttpControllers;use IlluminateHttpRequest;use AppHttpRequests;use AppHttpControllersController;class UserController extends Controller { public function __construct(){ $this-&gt;middleware('auth'); }}</pre> <div> 在这里，我们将身份验证分配使用中间件在UserController的构造方法。 </div> <h3> 示例 </h3> <p> 第1步&nbsp;-&nbsp;添加以下行到&nbsp;app/Http/routes.php&nbsp;文件文件并保存。 </p> <p> routes.php </p><pre>&lt;?phpRoute::get('/usercontroller/path',[ 'middleware' =&gt; 'First', 'uses' =&gt; 'UserController@showPath']);</pre> <div> 第2步&nbsp;-&nbsp;通过执行以下行创建一个名为FirstMiddleware&nbsp;的中间件。 </div><pre>Route::controller(‘base URI’,’&lt;class-name-of-the-controller&gt;’);</pre> <div> 替换&nbsp;&lt;class-name-of-the-controller&gt;使用你给定控制器类名。 </div> <p> 控制器的方法名应该是类似&nbsp;GET或POST&nbsp;HTTP动词开头。如果以&nbsp;get&nbsp;开始，它只会处理&nbsp;get&nbsp;请求，如果它使用 post 开駋那么将处理post请求。在HTTP动词后，可以方法使用任何名称，但它应遵循 URI 的格式。 </p> <h3> 示例 </h3> <p> 第1步&nbsp;-&nbsp;执行下面的命令来创建一个控制器。其类名称为&nbsp;ImplicitController。这个类你也可以使用其它的任何名称。 </p><pre>php artisan make:controller ImplicitController</pre> <div> 第2步&nbsp;-&nbsp;成功执行后，会产生以下输出&nbsp;- </div> <div> 第3步&nbsp;-&nbsp;将以下代码复制到 app/Http/Controllers/ImplicitController.php 文件。 </div> <p style="font-family:Verdana, Geneva, Tahoma, Helvetica, text-align:justify;font-size:15px !important;background-color:inherit;"> <b>app/Http/Controllers/ImplicitController.php</b> </p><pre>&lt;?phpnamespace AppHttpControllers;use IlluminateHttpRequest;use AppHttpRequests;use AppHttpControllersController;class ImplicitController extends Controller { /** * Responds to requests to GET /test */ public function getIndex(){ echo 'index method'; } /** * Responds to requests to GET /test/show/1 */ public function getShow($id){ echo 'show method'; } /** * Responds to requests to GET /test/admin-profile */ public function getAdminProfile(){ echo 'admin profile method'; } /** * Responds to requests to POST /test/profile */ public function postProfile(){ echo 'profile method'; }}</pre> <div> 第4步&nbsp;-&nbsp;下面的行添加到&nbsp;app/Http/routes.php&nbsp;以将请求路由到指定的控制器。 </div> <p> <strong>app/Http/routes.php</strong> </p><pre>Route::controller('test','ImplicitController');</pre> <h2> <div> 构造器注入 </div> </h2> <p> Laravel服务容器是用来解析所有Laravel控制器。因此，你能够输入-提示控制器也许需要在其构造依赖。依赖关系将被自动解析和注射到控制器实例。 </p> <h3> 示例 </h3> <div> 步骤1&nbsp;-&nbsp;下面的代码添加到 app/Http/routes.php 文件。 </div> <p> <strong>app/Http/routes.php</strong> </p><pre>class MyClass{ public $foo = 'bar';}Route::get('/myclass','ImplicitController@index');</pre> <div> 第2步&nbsp;-&nbsp;下面的代码添加到 app/Http/Controllers/ImplicitController.php 文件。 </div> <p> <strong>app/Http/Controllers/ImplicitController.php</strong> </p><pre>&lt;?phpnamespace AppHttpControllers;use IlluminateHttpRequest;use AppHttpRequests;use AppHttpControllersController;class ImplicitController extends Controller { private $myclass; public function __construct(MyClass $myclass){ $this-&gt;myclass = $myclass; } public function index(){ dd($this-&gt;myclass); }}</pre> <div> 第3步&nbsp;-&nbsp;访问以下网址来测试构造器注入。 </div> <p> <strong>http://localhost:8000/myclass</strong> </p> <div> 第4步&nbsp;-&nbsp;输出结果如下面图所示。<br /><img src="https://www.lvtao.net/study_doc/uploadfile/2017/0421/20170421023520374.png" alt="" /><br /> </div> <h2> <div> 方法注入 </div> </h2> <div> 除了构造器注入，也可以输入&nbsp;-&nbsp;在你的控制器操作方法触发依赖。 </div> <h3> 示例 </h3> <div> 步骤1&nbsp;-&nbsp;下面的代码添加到&nbsp;app/Http/routes.php&nbsp;文件。 </div> <p> <strong>app/Http/routes.php</strong> </p><pre>class MyClass{ public $foo = 'bar';}Route::get('/myclass','ImplicitController@index');</pre> <div> 第2步&nbsp;-&nbsp;下面的代码添加到 app/Http/Controllers/ImplicitController.php 文件。 </div> <p> <strong>app/Http/Controllers/ImplicitController.php</strong> </p><pre>&lt;?phpnamespace AppHttpControllers;use IlluminateHttpRequest;use AppHttpRequests;use AppHttpControllersController;class ImplicitController extends Controller { public function index(MyClass $myclass){ dd($myclass); }} </pre> <div> 第3步&nbsp;-&nbsp;访问以下网址来测试构造器注入。 </div> <p> <strong>http://localhost:8000/myclass</strong> </p> <div> 它会产生下面的输出&nbsp;-<br /><img src="https://www.lvtao.net/study_doc/uploadfile/2017/0421/20170421023521218.png" alt="" /><br /> </div></div><br/> </div>
        </div>
    </div>
</div>
<div id="footer">
    <div class="outer">
        Powered By <a href="https://www.lvtao.net" target="_blank">吕滔博客</a>
    </div>
</div>
</body>
<div style="display:none;"><script src="https://s11.cnzz.com/z_stat.php?id=2109427&web_id=2109427" language="JavaScript"></script><script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?33cc09e0794d203c608fa36a59305449";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script></div>
</html>